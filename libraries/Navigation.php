<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
class Navigation {
	var $menu = array();  //The array holding all navigation elements
	private function _init()	{		$CI =& get_instance();
		$CI->myclass->get_lang('user');
		$this->menu = array		(				MENU_HOME 			=> 	array(						'text'		=> 	$CI->lang->line('user_home'),						'link'		=> 	base_url() . 'user/home',						'show_condition'=>	1,						'parent'	=>	0				),				MENU_PRODUCTS		=> 	array(						'text'		=> 	$CI->lang->line('user_products'),						'link'		=> 	base_url() . 'products',						'show_condition'=>	1,						'parent'	=>	0				),				MENU_ORDERS			=> 	array(						'text'		=> 	$CI->lang->line('user_orders'),						'link'		=> 	base_url() . 'orders',						'show_condition'=>	1,						'parent'	=>	0				),				MENU_SHOP			=> 	array(						'text'		=> 	$CI->lang->line('user_shop'),						'link'		=> 	base_url() . 'shop',						'show_condition'=>	1,						'parent'	=>	0				),				MENU_SHOP_FIRSTPAGE	=> 	array(						'text'		=> 	$CI->lang->line('user_shop_firstpage'),						'link'		=> 	base_url() . 'shop/firstpage',						'show_condition'=>	1,						'parent'	=>	MENU_SHOP				),				MENU_SHOP_ABOUTUS	=> 	array(						'text'		=> 	$CI->lang->line('user_shop_aboutus'),						'link'		=> 	base_url() . 'shop/aboutus',						'show_condition'=>	1,						'parent'	=>	MENU_SHOP				),				MENU_SHOP_PROMOTION => 	array(						'text'		=> 	$CI->lang->line('user_shop_promotion'),						'link'		=> 	base_url() . 'shop/promotion',						'show_condition'=>	1,						'parent'	=>	MENU_SHOP				),				MENU_SHOP_GALLERIRES=> 	array(						'text'		=> 	$CI->lang->line('user_shop_galleries'),						'link'		=> 	base_url() . 'shop/galleries',						'show_condition'=>	1,						'parent'	=>	MENU_SHOP				),				MENU_SHOP_PAYMENT	=> 	array(						'text'		=> 	$CI->lang->line('user_shop_payment'),						'link'		=> 	base_url() . 'shop/payment',						'show_condition'=>	1,						'parent'	=>	MENU_SHOP				),				MENU_SHOP_CONTACTUS => 	array(						'text'		=> 	$CI->lang->line('user_shop_contactus'),						'link'		=> 	base_url() . 'shop/contactus',						'show_condition'=>	1,						'parent'	=>	MENU_SHOP				),				MENU_SHOP_SETTING	=> 	array(						'text'		=> 	$CI->lang->line('user_shop_setting'),						'link'		=> 	base_url() . 'shop/setting',						'show_condition'=>	1,						'parent'	=>	MENU_SHOP				),				MENU_MESSAGE 		=> 	array(						'text'		=> 	$CI->lang->line('user_message'),						'link'		=> 	base_url() . 'message',						'show_condition'=>	1,						'parent'	=>	0				),				MENU_MESSAGE_WRITE 	=> 	array(						'text'		=> 	$CI->lang->line('user_message_write'),						'link'		=> 	base_url() . 'message/write',						'show_condition'=>	1,						'parent'	=>	MENU_MESSAGE				),				MENU_MESSAGE_INBOX	=> 	array(						'text'		=> 	$CI->lang->line('user_message_inbox'),						'link'		=> 	base_url() . 'message/inbox',						'show_condition'=>	1,						'parent'	=>	MENU_MESSAGE				),				MENU_MESSAGE_SENTBOX=> 	array(						'text'		=> 	$CI->lang->line('user_message_sentbox'),						'link'		=> 	base_url() . 'message/sentbox',						'show_condition'=>	1,						'parent'	=>	MENU_MESSAGE				),				MENU_STATISTIC		=> 	array(						'text'		=> 	$CI->lang->line('user_statistic'),						'link'		=> 	base_url() . 'statistic',						'show_condition'=>	1,						'parent'	=>	0				),				MENU_STATISTIC_INCOME => 	array(						'text'		=> 	$CI->lang->line('user_statistic_income'),						'link'		=> 	base_url() . 'statistic/income',						'show_condition'=>	1,						'parent'	=>	MENU_STATISTIC				),				MENU_STATISTIC_TOPVIEWS => 	array(						'text'		=> 	$CI->lang->line('user_statistic_topviews'),						'link'		=> 	base_url() . 'statistic/topviews',						'show_condition'=>	1,						'parent'	=>	MENU_STATISTIC				),				MENU_STATISTIC_TOPRATING => 	array(						'text'		=> 	$CI->lang->line('user_statistic_toprating'),						'link'		=> 	base_url() . 'statistic/toprating',						'show_condition'=>	1,						'parent'	=>	MENU_STATISTIC				),				MENU_STATISTIC_BESTSELLER => 	array(						'text'		=> 	$CI->lang->line('user_statistic_bestseller'),						'link'		=> 	base_url() . 'statistic/bestseller',						'show_condition'=>	1,						'parent'	=>	MENU_STATISTIC				),				MENU_SETTING		=> 	array(						'text'		=> 	$CI->lang->line('user_setting'),						'link'		=> 	base_url() . 'user/setting',						'show_condition'=>	1,						'parent'	=>	0				)		);	}	private function _get_text($menu_id)	{		return $this->menu[$menu_id]['text'];	}	private function _get_link($menu_id)	{		return $this->menu[$menu_id]['link'];	}	private function _hasParent($menu_id)	{		if ( $this->menu[$menu_id]['show_condition'] && $this->menu[$menu_id]['parent'] != 0 ) {			return TRUE;		}		return FALSE;	}	public function get_nav($menu_id)	{		$this->_init();		 		$menu_curr = $menu_id;		$out = '';		 		do {			if ($this->_hasParent($menu_curr))			{				$out = '<li><a href="'.$this->_get_link($menu_curr).'">'.$this->_get_text($menu_curr).'</a></li>'.$out;				$menu_curr = $this->menu[$menu_curr]['parent'];			}		}		while ( $this->_hasParent($menu_curr) );		 		$out = '<li><a href="'.$this->_get_link($menu_curr).'">'.$this->_get_text($menu_curr).'</a></li>'.$out;		return $out;	}}/* End of file Navigation.php */